# Story 1.5.5: Dependencies & Prerequisites

## Status
Ready for development

## Story
**As a** developer,
**I want** all required dependencies installed and component skeletons created,
**so that** Stories 1.6 and 2.1 can proceed without import errors or missing dependencies.

---

## Prerequisites Overview

### Missing Dependencies
- **clsx** - Required for className merging in recommendations pattern
- **Component skeletons** - Prevent import errors during implementation

### Missing Files
- **PWA manifest** - Required by recommendations layout.tsx
- **PWA icons** - Expected by manifest configuration
- **Component placeholders** - Prevent build failures during incremental implementation

### Configuration Alignment
- **Utils pattern** - Ensure clsx + twMerge pattern works correctly
- **Basic security setup** - Prepare for next.config.js enhancements

---

## Acceptance Criteria

1. **Required npm packages installed:**
   - `clsx` package installed for className merging
   - Package.json updated with new dependency
   - No package installation conflicts

2. **Component skeleton files created:**
   - `components/sections/about-story.tsx` - Empty component skeleton
   - `components/sections/contact-email.tsx` - Empty component skeleton
   - `components/ui/theme-toggle.tsx` - Empty component skeleton
   - All skeletons have proper TypeScript interfaces to prevent build errors

3. **PWA asset files created:**
   - `public/manifest.webmanifest` - Basic PWA manifest structure
   - `public/icon-192.png` - 192x192 placeholder icon (can be simple favicon copy)
   - `public/icon-512.png` - 512x512 placeholder icon (can be simple favicon copy)

4. **Utils.ts verified for clsx pattern:**
   - Confirm `lib/utils.ts` cn() function works with new clsx dependency
   - Test className merging functionality
   - No conflicts with existing utility usage

5. **Build verification:**
   - `npm run build` completes without errors
   - `npm run dev` starts without dependency warnings
   - All existing functionality preserved (header, hero, error boundaries)

6. **Import path verification:**
   - All expected import paths work (even with empty components)
   - No TypeScript errors for missing components
   - Clean development experience ready for implementation

---

## Tasks / Subtasks

- [ ] **Install required dependencies**
  - [ ] Run `npm install clsx` to add className merging package
  - [ ] Verify package.json updated correctly
  - [ ] Test that clsx imports work in utils.ts
  - [ ] Confirm no version conflicts with existing packages

- [ ] **Create component skeleton files**
  - [ ] Create `components/sections/about-story.tsx`:
    ```typescript
    interface AboutStoryProps {
      id?: string;
    }

    export default function AboutStory({ id }: AboutStoryProps) {
      return <section id={id}>About Story - Coming Soon</section>
    }
    ```
  - [ ] Create `components/sections/contact-email.tsx`:
    ```typescript
    interface ContactEmailProps {
      id?: string;
    }

    export default function ContactEmail({ id }: ContactEmailProps) {
      return <section id={id}>Contact Email - Coming Soon</section>
    }
    ```
  - [ ] Create `components/ui/theme-toggle.tsx`:
    ```typescript
    export default function ThemeToggle() {
      return <button>Theme Toggle - Coming Soon</button>
    }
    ```

- [ ] **Create PWA asset files**
  - [ ] Create basic `public/manifest.webmanifest`:
    ```json
    {
      "name": "Superoptimised",
      "short_name": "Superoptimised",
      "start_url": "/",
      "display": "standalone",
      "background_color": "#0C0C0C",
      "theme_color": "#0C0C0C",
      "icons": [
        { "src": "/icon-192.png", "sizes": "192x192", "type": "image/png" },
        { "src": "/icon-512.png", "sizes": "512x512", "type": "image/png" }
      ]
    }
    ```
  - [ ] Copy existing favicon.ico to icon-192.png and icon-512.png as placeholders
  - [ ] Verify manifest.webmanifest is accessible at /manifest.webmanifest

- [ ] **Verify utils.ts compatibility**
  - [ ] Test that existing `lib/utils.ts` cn() function works with clsx
  - [ ] Confirm className merging works: `cn("class1", "class2", conditionalClass)`
  - [ ] Verify no breaking changes to existing component usage
  - [ ] Document that cn() function is ready for new component implementations

- [ ] **Build and development verification**
  - [ ] Run `npm run build` and confirm no errors
  - [ ] Run `npm run dev` and confirm server starts cleanly
  - [ ] Test that existing pages load without errors
  - [ ] Verify all new import paths are resolvable (even if components are empty)

- [ ] **Import path testing**
  - [ ] Test import: `import AboutStory from "@/components/sections/about-story"`
  - [ ] Test import: `import ContactEmail from "@/components/sections/contact-email"`
  - [ ] Test import: `import ThemeToggle from "@/components/ui/theme-toggle"`
  - [ ] Confirm TypeScript doesn't show errors for these imports

---

## Component Skeleton Specifications

### about-story.tsx
```typescript
interface AboutStoryProps {
  id?: string;
  className?: string;
}

export default function AboutStory({ id, className }: AboutStoryProps) {
  return (
    <section id={id} className={className}>
      <div className="container">
        <h2>About Story Component</h2>
        <p>This component will be implemented in Story 2.1</p>
      </div>
    </section>
  )
}
```

### contact-email.tsx
```typescript
interface ContactEmailProps {
  id?: string;
  className?: string;
}

export default function ContactEmail({ id, className }: ContactEmailProps) {
  return (
    <section id={id} className={className}>
      <div className="container">
        <h2>Contact Email Component</h2>
        <p>This component will be implemented in Story 2.1</p>
      </div>
    </section>
  )
}
```

### theme-toggle.tsx
```typescript
export default function ThemeToggle() {
  return (
    <button
      type="button"
      className="px-lg py-sm border rounded"
      disabled
    >
      Theme Toggle (Story 2.2)
    </button>
  )
}
```

---

## PWA Manifest Configuration

### Basic manifest.webmanifest
```json
{
  "name": "Superoptimised",
  "short_name": "Superoptimised",
  "description": "An indie dev studio in London",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#0C0C0C",
  "theme_color": "#0C0C0C",
  "icons": [
    {
      "src": "/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
```

---

## Verification Checklist

### Build Verification
- [ ] `npm install` completes successfully
- [ ] `npm run build` completes without errors
- [ ] `npm run dev` starts without warnings
- [ ] All existing pages load correctly
- [ ] No TypeScript compilation errors

### Import Verification
- [ ] All new component imports resolve correctly
- [ ] Components render placeholder content
- [ ] No missing module errors in browser console
- [ ] TypeScript IntelliSense works for new components

### Asset Verification
- [ ] PWA manifest accessible at `/manifest.webmanifest`
- [ ] Icon files exist and are accessible
- [ ] No 404 errors for expected assets
- [ ] Favicon continues working normally

---

## Integration Notes

### Preparation for Story 1.6 (Cleanup)
- All import paths will work during cleanup operations
- Component skeletons prevent build failures during file deletions
- Dependencies ready for design system alignment

### Preparation for Story 2.1 (Content Implementation)
- Component files exist and ready for content implementation
- Proper TypeScript interfaces established
- Container structure prepared for section-based layout

### Preparation for Story 2.2 (Navigation Enhancement)
- ThemeToggle component ready for enhancement
- PWA manifest supports theme system integration
- Utils.ts ready for advanced className merging

---

## Risk Mitigation

### Build Failure Prevention
- Skeleton components prevent import errors during incremental development
- All expected files exist before other stories begin
- TypeScript interfaces prevent compilation errors

### Dependency Management
- clsx package added without version conflicts
- Existing utils.ts pattern remains functional
- No breaking changes to current functionality

### Development Experience
- Clean development server startup
- No missing module warnings
- Proper IntelliSense support for new components

---

## Dev Notes

- **Skeleton approach:** Create minimal working components to prevent build failures
- **Progressive enhancement:** Components will be enhanced in subsequent stories
- **Import safety:** All expected import paths work immediately
- **Build verification:** Essential to run build/dev tests after skeleton creation
- **PWA preparation:** Basic manifest ready for theme system integration